# Example Papaya configuration.
# Copy to ~/.config/papaya/config.yaml and adjust paths/categories as needed.

root_dir: ~/.local/lib/papaya

rules: |
  known_category = mod.match_from.classify(message, None, account)
  if known_category:
      move_to(known_category)
  else:
      features = mod.extract_features.classify(message)
      prediction = mod.naive_bayes.classify(message, features, account)

      if prediction.category and prediction.confidence >= 0.55:
          move_to(prediction.category, confidence=prediction.confidence)
      else:
          skip()

train: |
  features = mod.extract_features.classify(message)
  mod.naive_bayes.train(message, features, category, account)
  mod.tfidf_sgd.train(message, features, category, account)
  mod.match_from.train(message, features, category, account)

module_paths:
  - ~/.config/papaya/modules

maildirs:
  - name: personal
    path: /var/vmail/example.com/personal
    rules: |
      known_category = mod.match_from.classify(message, None, account)
      if known_category:
          move_to(known_category)
      else:
          features = mod.extract_features.classify(message)
          prediction = mod.naive_bayes.classify(message, features, account)

          if prediction.category and prediction.confidence >= 0.55:
              move_to(prediction.category, confidence=prediction.confidence)
          else:
              skip()
    train: |
      features = mod.extract_features.classify(message)
      mod.naive_bayes.train(message, features, category, account)
      mod.tfidf_sgd.train(message, features, category, account)
      mod.match_from.train(message, features, category, account)

categories:
  Spam: {}
  Newsletters: {}
  Important: {}

logging:
  level: info
  write_debug_logfile: false
  write_predictions_logfile: true
